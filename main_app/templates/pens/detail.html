{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/pens/pen-detail.css' %}" />
{% endblock %} {% block content %}
<section class="cat-container">
  <div class="cat-details">
    <h1>{{ pen.model }}</h1>

    <p><strong>Nib Size:</strong> {{ pen.get_nib_size_display }}</p>
    <p><strong>Nib Material:</strong> {{ pen.get_nib_material_display }}</p>
    <p>
      <strong>Ink Filling Mechanism:</strong> {{ pen.get_ink_fill_display }}
    </p>
    <p><strong>Acquired Date:</strong> {{ pen.acquired_date }}</p>

    {% if pen.notes %}
    <p><strong>Notes:</strong> {{ pen.notes }}</p>
    {% else %}
    <p>No notes available.</p>
    {% endif %}

    <div class="cat-actions">
      <a href="{% url 'pen-update' pen.id %}" class="btn warn">Edit</a>
      <a href="{% url 'pen-delete' pen.id %}" class="btn danger">Delete</a>
    </div>
  </div>
</section>

  <div class="feedings-toy-container">
  <section class="toys">
  <div class="subsection-title">
<h2>Currently Inked / Ink History</h2>
<div class="subsection-content">
<ul>
  {% for log in pen.ink_logs.all %}
    <li class='inkLog'>
      <span style="background-color: {{ log.ink.hex_code }};"></span> 
      <strong>{{ log.ink.brand }} {{ log.ink.name }}:</strong><br>
      (inked on {{ log.date_inked }}
      {% if log.date_cleaned %}
        – cleaned {{ log.date_cleaned }}, {{ log.days_inked }} days total
      {% else %}
        – still inked, {{ log.days_inked }} days so far)<br>
        <form method="post" action="{% url 'mark_cleaned' log.id %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="btn submit">Mark Cleaned</button>
        </form>
      {% endif %}
    </li>
  {% empty %}
    <li>No inks logged yet.</li>
  {% endfor %}
</ul>

<h2>Ink This Pen</h2>
<form method="post">
  {% csrf_token %}
  {{ log_form.as_p }}
  <button type="submit" class="btn submit">Save</button>
</form>
</div>
</div>
</section>
</div>
{% endblock %}