{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/pens/pen-detail.css' %}" />
{% endblock %} {% block content %}
<section class="cat-container">
  <div class="cat-details">
    <h1>{{ pen.model }}</h1>

    <p><strong>Nib Size:</strong> {{ pen.get_nib_size_display }}</p>
    <p><strong>Nib Material:</strong> {{ pen.get_nib_material_display }}</p>
    <p>
      <strong>Ink Filling Mechanism:</strong> {{ pen.get_ink_fill_display }}
    </p>
    <p><strong>Acquired Date:</strong> {{ pen.acquired_date }}</p>

    {% if pen.notes %}
    <p><strong>Notes:</strong> {{ pen.notes }}</p>
    {% else %}
    <p>No notes available.</p>
    {% endif %}

    <div class="cat-actions">
      <a href="{% url 'pen-update' pen.id %}" class="btn warn">Edit</a>
      <a href="{% url 'pen-delete' pen.id %}" class="btn danger">Delete</a>
    </div>
  </div>
</section>

{% comment %} <div class="feedings-toy-container">
  <section class="toys">
  <div class="subsection-title">
  <h2>Inks</h2>
  <h3>Currently Inked</h3>
<div class="subsection-content">
  {% if pen.inks.exists %}
    {% for ink in pen.inks.all %}
      <div class="toy-container">
        <div class="color-block" style="background-color: {{ ink.hex_code }}"></div>
        <p>{{ ink.brand }} {{ ink.name }}</p>
        <form action="{% url 'remove-ink' pen.id ink.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn danger">Remove Ink</button>
        </form>
      </div>
    {% endfor %}
  {% else %}
    <p>This pen is currently not inked!</p>
  {% endif %}
</div>
  <h3>Available Inks</h3>
  <div class="subsection-content">
    {% for ink in inks %}
      <div class="toy-container">
        <div class="color-block" style="background-color: {{ ink.hex_code }}"></div>
        <p>{{ ink.brand }} {{ ink.name }}</p>
        <form action="{% url 'associate-ink' pen.id ink.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn submit">Ink Pen</button>
        </form>
      </div>
    {% endfor %}
  </div> {% endcomment %}

  <div class="feedings-toy-container">
  <section class="toys">
  <div class="subsection-title">
<h2>Currently Inked / Ink History</h2>
<div class="subsection-content">
<ul>
  {% for log in pen.ink_logs.all %}
    <li>
      {{ log.ink.brand }} {{ log.ink.name }} 
      (inked on {{ log.date_inked }}
      {% if log.date_cleaned %}
        – cleaned {{ log.date_cleaned }}, {{ log.days_inked }} days total
      {% else %}
        – still inked, {{ log.days_inked }} days so far
      {% endif %})
    </li>
  {% empty %}
    <li>No inks logged yet.</li>
  {% endfor %}
</ul>

<h2>Log a New Ink</h2>
<form method="post">
  {% csrf_token %}
  {{ log_form.as_p }}
  <button type="submit" class="btn submit">Save</button>
</form>
</div>
</div>
</section>
</div>
{% endblock %}